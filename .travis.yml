dist: trusty
sudo: false

language: node_js
node_js:
  - "10"

addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

cache:
  directories:
     - ./node_modules

install:
  - npm install
  - npm install -g tslint
  - npm install -g typescript@next

script:
  - npm run test -- --no-watch --no-progress
  - npm run build
  - npm run build --prod

deploy:
  # beta testing
  - provider: pages
    skip-cleanup: true
    github-token: $GITHUB_TOKEN
    keep-history: true
    local-dir: dist
    on:
      branch: develop
    # production
  - provider: firebase
    skip_cleanup: true
    email: simtyuku@gmail.com
    token:
      secure: $FIREBASE_TOKEN
    project: takeme-2019
    on:
      branch: master